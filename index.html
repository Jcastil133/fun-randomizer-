<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>T-Mobile Team Randomizer</title>
  <style>
    :root{
      --bg: #0b0b0f;
      --panel: rgba(255,255,255,0.06);
      --panel2: rgba(255,255,255,0.10);
      --text: rgba(255,255,255,0.92);
      --muted: rgba(255,255,255,0.70);
      --brand: #E20074; /* T-Mobile magenta */
      --brand2: #ff4da6;
      --ok: #37d67a;
      --warn: #ffcc66;
      --shadow: 0 20px 60px rgba(0,0,0,0.55);
      --radius: 20px;
    }

    *{ box-sizing: border-box; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color: var(--text);
      background:
        radial-gradient(1200px 600px at 20% 10%, rgba(226,0,116,0.22), transparent 60%),
        radial-gradient(900px 500px at 80% 15%, rgba(255,77,166,0.18), transparent 55%),
        radial-gradient(900px 700px at 40% 100%, rgba(255,255,255,0.08), transparent 65%),
        var(--bg);
      min-height: 100vh;
      overflow-x: hidden;
    }

    .topbar{
      position: sticky; top: 0;
      backdrop-filter: blur(10px);
      background: linear-gradient(to bottom, rgba(11,11,15,0.85), rgba(11,11,15,0.35));
      border-bottom: 1px solid rgba(255,255,255,0.08);
      z-index: 50;
    }

    .wrap{
      max-width: 1100px;
      margin: 0 auto;
      padding: 18px 18px 60px;
    }

    .header{
      display:flex;
      gap:16px;
      align-items: center;
      justify-content: space-between;
      padding: 16px 0;
    }

    .brandMark{
      display:flex; align-items:center; gap:12px;
    }
    .dot{
      width: 14px; height: 14px;
      border-radius: 999px;
      background: var(--brand);
      box-shadow: 0 0 0 6px rgba(226,0,116,0.14), 0 0 30px rgba(226,0,116,0.35);
      animation: pulse 2.2s ease-in-out infinite;
    }
    @keyframes pulse{
      0%,100%{ transform: scale(1); box-shadow: 0 0 0 6px rgba(226,0,116,0.14), 0 0 30px rgba(226,0,116,0.35); }
      50%{ transform: scale(1.08); box-shadow: 0 0 0 10px rgba(226,0,116,0.10), 0 0 45px rgba(226,0,116,0.45); }
    }

    h1{
      font-size: clamp(20px, 3.2vw, 30px);
      margin: 0;
      letter-spacing: 0.2px;
    }
    .sub{
      margin: 2px 0 0;
      color: var(--muted);
      font-size: 14px;
    }

    .grid{
      display:grid;
      grid-template-columns: 420px 1fr;
      gap: 18px;
      margin-top: 18px;
    }
    @media (max-width: 980px){
      .grid{ grid-template-columns: 1fr; }
    }

    .card{
      background: linear-gradient(180deg, var(--panel), rgba(255,255,255,0.03));
      border: 1px solid rgba(255,255,255,0.10);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
    }
    .cardHeader{
      padding: 16px 16px 10px;
      display:flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 12px;
    }
    .cardHeader h2{
      margin: 0;
      font-size: 16px;
      letter-spacing: 0.2px;
    }
    .pill{
      font-size: 12px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(226,0,116,0.45);
      background: rgba(226,0,116,0.16);
      color: rgba(255,255,255,0.9);
      white-space: nowrap;
    }
    .cardBody{ padding: 0 16px 16px; }

    label{
      display:block;
      font-size: 12px;
      color: var(--muted);
      margin: 12px 0 6px;
    }
    textarea{
      width:100%;
      min-height: 170px;
      resize: vertical;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(0,0,0,0.25);
      color: var(--text);
      padding: 12px 12px;
      outline: none;
      line-height: 1.35;
      box-shadow: inset 0 0 0 1px rgba(0,0,0,0.35);
    }
    textarea:focus{
      border-color: rgba(226,0,116,0.55);
      box-shadow: inset 0 0 0 1px rgba(226,0,116,0.22), 0 0 0 3px rgba(226,0,116,0.12);
    }

    .row{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    @media (max-width: 520px){
      .row{ grid-template-columns: 1fr; }
    }

    input[type="number"]{
      width:100%;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(0,0,0,0.25);
      color: var(--text);
      padding: 10px 10px;
      outline: none;
    }
    input[type="number"]:focus{
      border-color: rgba(226,0,116,0.55);
      box-shadow: 0 0 0 3px rgba(226,0,116,0.12);
    }

    .actions{
      display:flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 14px;
    }
    button{
      border: 0;
      cursor: pointer;
      border-radius: 14px;
      padding: 10px 12px;
      font-weight: 650;
      color: rgba(255,255,255,0.92);
      background: rgba(255,255,255,0.10);
      border: 1px solid rgba(255,255,255,0.14);
      transition: transform 120ms ease, background 120ms ease, border-color 120ms ease;
      user-select: none;
    }
    button:hover{ transform: translateY(-1px); background: rgba(255,255,255,0.14); }
    button:active{ transform: translateY(0px) scale(0.99); }

    .primary{
      background: linear-gradient(135deg, var(--brand), var(--brand2));
      border-color: rgba(255,255,255,0.14);
      box-shadow: 0 10px 30px rgba(226,0,116,0.25);
    }
    .primary:hover{ filter: brightness(1.05); }

    .ghost{
      background: transparent;
      border-color: rgba(255,255,255,0.14);
    }

    .danger{
      background: rgba(255,80,80,0.12);
      border-color: rgba(255,80,80,0.35);
    }

    .note{
      margin-top: 10px;
      font-size: 12px;
      color: var(--muted);
      line-height: 1.35;
    }

    .status{
      margin-top: 10px;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.06);
      font-size: 13px;
      color: rgba(255,255,255,0.86);
    }
    .status strong{ color: white; }

    /* Results */
    .stage{
      padding: 16px;
    }
    .stageTop{
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 12px;
    }
    .stageTop h2{
      margin: 0;
      font-size: 16px;
    }
    .miniActions{
      display:flex; gap:10px; flex-wrap: wrap; justify-content:flex-end;
    }

    .teams{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    @media (max-width: 780px){
      .teams{ grid-template-columns: 1fr; }
    }

    .team{
      border-radius: 18px;
      background: linear-gradient(180deg, var(--panel2), rgba(255,255,255,0.05));
      border: 1px solid rgba(255,255,255,0.12);
      padding: 12px;
      position: relative;
      overflow: hidden;
      transform: translateZ(0);
    }

    .team:before{
      content:"";
      position:absolute;
      inset: -60px -80px auto auto;
      width: 220px;
      height: 220px;
      background: radial-gradient(circle at 30% 30%, rgba(226,0,116,0.35), transparent 60%);
      filter: blur(1px);
      transform: rotate(14deg);
      pointer-events:none;
    }

    .teamTitle{
      display:flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 8px;
    }
    .teamTitle .name{
      font-weight: 800;
      letter-spacing: 0.2px;
    }
    .badge{
      font-size: 12px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(0,0,0,0.20);
      color: rgba(255,255,255,0.85);
    }

    .slots{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    .slot{
      flex: 1 1 140px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(0,0,0,0.22);
      padding: 10px 10px;
      min-height: 44px;
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 8px;
      overflow:hidden;
      position:relative;
    }
    .slot .label{
      font-size: 12px;
      color: var(--muted);
      margin:0;
    }
    .slot .value{
      font-weight: 750;
      letter-spacing: 0.2px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 240px;
    }

    /* Shuffle animation (slot-machine-ish) */
    .shuffling .value{
      animation: shimmer 650ms linear infinite;
      filter: blur(0.25px);
    }
    @keyframes shimmer{
      0%{ transform: translateY(0px); opacity: 0.45; }
      25%{ transform: translateY(-2px); opacity: 0.75; }
      50%{ transform: translateY(0px); opacity: 0.45; }
      75%{ transform: translateY(2px); opacity: 0.75; }
      100%{ transform: translateY(0px); opacity: 0.45; }
    }

    .fadeIn{
      animation: pop 260ms ease-out both;
    }
    @keyframes pop{
      from{ transform: translateY(6px); opacity:0; }
      to{ transform: translateY(0px); opacity:1; }
    }

    .footerHint{
      margin-top: 12px;
      color: var(--muted);
      font-size: 12px;
      line-height: 1.35;
    }

    /* Confetti canvas */
    #confetti {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 999;
    }

    /* Tiny "glow" */
    .glow{
      box-shadow: 0 0 0 3px rgba(226,0,116,0.12), 0 18px 60px rgba(226,0,116,0.14);
      border-color: rgba(226,0,116,0.25);
    }
  </style>
</head>

<body>
  <canvas id="confetti"></canvas>

  <div class="topbar">
    <div class="wrap">
      <div class="header">
        <div class="brandMark">
          <div class="dot" aria-hidden="true"></div>
          <div>
            <h1>T-Mobile Team Randomizer</h1>
            <div class="sub">Build teams fast ‚Äî with a little drama.</div>
          </div>
        </div>

        <div class="pill" id="pill">Ready</div>
      </div>
    </div>
  </div>

  <div class="wrap">
    <div class="grid">
      <!-- Controls -->
      <div class="card">
        <div class="cardHeader">
          <div>
            <h2>Players</h2>
            <div class="sub">Paste names (one per line). Blank lines ignored.</div>
          </div>
          <div class="pill">v1.0</div>
        </div>

        <div class="cardBody">
          <label for="names">Names</label>
          <textarea id="names" placeholder="Josh&#10;Will&#10;Clayton&#10;Matt&#10;..."></textarea>

          <div class="row">
            <div>
              <label for="teamCount">Teams</label>
              <input id="teamCount" type="number" min="2" max="12" value="4" />
            </div>
            <div>
              <label for="teamSize">Players / Team</label>
              <input id="teamSize" type="number" min="2" max="6" value="2" />
            </div>
          </div>

          <div class="actions">
            <button class="primary" id="btnShuffle">Shuffle + Build Teams</button>
            <button class="ghost" id="btnCaptain">Pick Captains</button>
            <button class="ghost" id="btnCopy">Copy Results</button>
            <button class="danger" id="btnClear">Clear</button>
          </div>

          <div class="status" id="status">
            <strong>Tip:</strong> For 4 teams of 2, you‚Äôll want 8 names. Extra names go to the ‚ÄúAlternates‚Äù list.
          </div>

          <div class="note">
            Optional fun rule: if you want ‚Äúsales unlocks‚Äù, keep this page open and hit Shuffle each time someone closes a 10+ SIM sale üòÑ
          </div>
        </div>
      </div>

      <!-- Results -->
      <div class="card">
        <div class="stage">
          <div class="stageTop">
            <h2>Teams</h2>
            <div class="miniActions">
              <button class="ghost" id="btnReveal">Reveal Dramatically</button>
              <button class="ghost" id="btnReRoll">Re-Roll</button>
            </div>
          </div>

          <div id="teams" class="teams"></div>

          <div class="footerHint" id="footerHint"></div>
        </div>
      </div>
    </div>
  </div>

<script>
  // ---------- Utilities ----------
  const $ = (id) => document.getElementById(id);

  function cleanNames(raw){
    return raw
      .split(/\r?\n/)
      .map(s => s.trim())
      .filter(Boolean);
  }

  // Fisher‚ÄìYates shuffle
  function shuffle(arr){
    const a = arr.slice();
    for(let i=a.length-1;i>0;i--){
      const j = Math.floor(Math.random() * (i+1));
      [a[i], a[j]] = [a[j], a[i]];
    }
    return a;
  }

  function nowPill(text){
    $("pill").textContent = text;
  }

  function setStatus(msg, tone=""){
    $("status").innerHTML = msg;
    $("status").classList.toggle("glow", tone === "glow");
  }

  function escapeHtml(str){
    return str.replace(/[&<>"']/g, (m)=>({
      "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"
    }[m]));
  }

  // ---------- State ----------
  let lastTeams = null; // { teams: [ [names]... ], alternates: [names], captains: [name|null] }

  // ---------- Render ----------
  function renderTeams(model, opts={animate:false, shuffling:false}){
    const teamsEl = $("teams");
    teamsEl.innerHTML = "";

    const {teams, alternates, captains} = model;

    teams.forEach((members, idx)=>{
      const team = document.createElement("div");
      team.className = "team" + (opts.animate ? " fadeIn" : "");

      const title = document.createElement("div");
      title.className = "teamTitle";
      title.innerHTML = `
        <div class="name">Team ${idx+1}</div>
        <div class="badge">${captains?.[idx] ? "Captain: " + escapeHtml(captains[idx]) : "No captain yet"}</div>
      `;

      const slots = document.createElement("div");
      slots.className = "slots";

      members.forEach((name, sIdx)=>{
        const slot = document.createElement("div");
        slot.className = "slot" + (opts.shuffling ? " shuffling" : "");
        slot.innerHTML = `
          <div class="label">Player ${sIdx+1}</div>
          <div class="value">${escapeHtml(name)}</div>
        `;
        slots.appendChild(slot);
      });

      team.appendChild(title);
      team.appendChild(slots);
      teamsEl.appendChild(team);
    });

    const hint = $("footerHint");
    if(alternates.length){
      hint.innerHTML = `<strong>Alternates:</strong> ${alternates.map(escapeHtml).join(", ")}`;
    } else {
      hint.textContent = "No alternates.";
    }
  }

  function buildTeams(){
    const names = cleanNames($("names").value);
    const teamCount = clamp(parseInt($("teamCount").value, 10), 2, 12);
    const teamSize  = clamp(parseInt($("teamSize").value, 10), 2, 6);

    const needed = teamCount * teamSize;

    if(names.length < needed){
      setStatus(
        `<strong>Need more names.</strong> You set <strong>${teamCount}</strong> teams √ó <strong>${teamSize}</strong> players = <strong>${needed}</strong> needed, but only have <strong>${names.length}</strong>.`,
        "glow"
      );
      nowPill("Add names");
      return null;
    }

    const shuffled = shuffle(names);
    const picked = shuffled.slice(0, needed);
    const alternates = shuffled.slice(needed);

    const teams = [];
    for(let i=0;i<teamCount;i++){
      teams.push(picked.slice(i*teamSize, (i+1)*teamSize));
    }

    return {
      teams,
      alternates,
      captains: Array(teamCount).fill(null)
    };
  }

  function clamp(n, min, max){
    return Math.max(min, Math.min(max, isFinite(n) ? n : min));
  }

  // ---------- Dramatic Reveal ----------
  async function dramaticReveal(){
    if(!lastTeams){
      setStatus("<strong>Nothing to reveal yet.</strong> Click <em>Shuffle + Build Teams</em> first.");
      return;
    }

    nowPill("Revealing‚Ä¶");

    // Start with masked values
    const masked = {
      teams: lastTeams.teams.map(t => t.map(_ => "‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà")),
      alternates: lastTeams.alternates.slice(),
      captains: lastTeams.captains.slice()
    };
    renderTeams(masked, {animate:true, shuffling:true});

    // Reveal each slot with a small delay
    const teamEls = Array.from(document.querySelectorAll(".team"));
    const delay = (ms)=>new Promise(r=>setTimeout(r, ms));

    for(let t=0;t<lastTeams.teams.length;t++){
      const slots = teamEls[t].querySelectorAll(".slot .value");
      for(let s=0;s<slots.length;s++){
        await delay(220);
        slots[s].parentElement.classList.add("shuffling");
        slots[s].textContent = "‚Ä¶shuffling‚Ä¶";
        await delay(260);
        slots[s].parentElement.classList.remove("shuffling");
        slots[s].textContent = lastTeams.teams[t][s];
      }
      await delay(140);
    }

    nowPill("Done");
  }

  // ---------- Captains ----------
  function pickCaptains(){
    if(!lastTeams){
      setStatus("<strong>Build teams first.</strong> Then we‚Äôll pick captains.");
      return;
    }
    const captains = lastTeams.teams.map(team => team[Math.floor(Math.random() * team.length)]);
    lastTeams.captains = captains;
    renderTeams(lastTeams, {animate:true});
    setStatus(`<strong>Captains selected.</strong> If you don‚Äôt like it, hit Re-Roll üòÑ`);
    nowPill("Captains!");
  }

  // ---------- Copy ----------
  async function copyResults(){
    if(!lastTeams){
      setStatus("<strong>Nothing to copy yet.</strong> Build teams first.");
      return;
    }
    const lines = [];
    lastTeams.teams.forEach((team, i)=>{
      const cap = lastTeams.captains?.[i] ? ` (Captain: ${lastTeams.captains[i]})` : "";
      lines.push(`Team ${i+1}${cap}: ${team.join(", ")}`);
    });
    if(lastTeams.alternates.length){
      lines.push(`Alternates: ${lastTeams.alternates.join(", ")}`);
    }
    const text = lines.join("\n");

    try{
      await navigator.clipboard.writeText(text);
      setStatus("<strong>Copied!</strong> Paste into Teams chat or email.");
      nowPill("Copied");
    }catch(e){
      // fallback
      const ta = document.createElement("textarea");
      ta.value = text;
      document.body.appendChild(ta);
      ta.select();
      document.execCommand("copy");
      ta.remove();
      setStatus("<strong>Copied!</strong> Paste into Teams chat or email.");
      nowPill("Copied");
    }
  }

  // ---------- Confetti ----------
  const confettiCanvas = $("confetti");
  const ctx = confettiCanvas.getContext("2d");
  let confettiPieces = [];
  let confettiRAF = null;

  function sizeCanvas(){
    confettiCanvas.width = window.innerWidth * devicePixelRatio;
    confettiCanvas.height = window.innerHeight * devicePixelRatio;
  }
  window.addEventListener("resize", sizeCanvas);
  sizeCanvas();

  function launchConfetti(){
    const w = confettiCanvas.width;
    const h = confettiCanvas.height;

    const colors = ["#E20074", "#ffffff", "#ff4da6", "#c7c7c7"];
    const count = 140;

    confettiPieces = Array.from({length: count}).map(()=>({
      x: Math.random() * w,
      y: -Math.random() * h * 0.25,
      r: (Math.random()*6 + 4) * devicePixelRatio,
      vx: (Math.random()*2 - 1) * devicePixelRatio * 2.4,
      vy: (Math.random()*2 + 2.2) * devicePixelRatio * 2.6,
      rot: Math.random()*Math.PI,
      vr: (Math.random()*0.2 - 0.1),
      color: colors[Math.floor(Math.random()*colors.length)],
      life: Math.random()*70 + 90
    }));

    if(confettiRAF) cancelAnimationFrame(confettiRAF);
    tickConfetti();
  }

  function tickConfetti(){
    ctx.clearRect(0,0,confettiCanvas.width, confettiCanvas.height);

    confettiPieces.forEach(p=>{
      p.life -= 1;
      p.x += p.vx;
      p.y += p.vy;
      p.rot += p.vr;

      // draw as rotated rectangle
      ctx.save();
      ctx.translate(p.x, p.y);
      ctx.rotate(p.rot);
      ctx.fillStyle = p.color;
      ctx.fillRect(-p.r/2, -p.r/2, p.r, p.r*0.55);
      ctx.restore();
    });

    confettiPieces = confettiPieces.filter(p => p.life > 0 && p.y < confettiCanvas.height + 80);

    if(confettiPieces.length){
      confettiRAF = requestAnimationFrame(tickConfetti);
    } else {
      ctx.clearRect(0,0,confettiCanvas.width, confettiCanvas.height);
      confettiRAF = null;
    }
  }

  // ---------- Events ----------
  $("btnShuffle").addEventListener("click", async ()=>{
    const model = buildTeams();
    if(!model) return;

    lastTeams = model;

    // quick "shuffle" render first
    const pre = {
      teams: model.teams.map(t => t.map(_ => "‚Ä¶shuffling‚Ä¶")),
      alternates: model.alternates.slice(),
      captains: model.captains.slice()
    };
    renderTeams(pre, {animate:true, shuffling:true});
    nowPill("Shuffling‚Ä¶");

    await new Promise(r=>setTimeout(r, 650));
    renderTeams(model, {animate:true});
    setStatus(`<strong>Teams built.</strong> Click ‚ÄúReveal Dramatically‚Äù if you want the game-show vibe.`, "glow");
    nowPill("Ready");
    launchConfetti();
  });

  $("btnReveal").addEventListener("click", dramaticReveal);

  $("btnCaptain").addEventListener("click", pickCaptains);

  $("btnCopy").addEventListener("click", copyResults);

  $("btnReRoll").addEventListener("click", ()=>{
    if(!$("names").value.trim()){
      setStatus("<strong>Add names first.</strong>");
      return;
    }
    $("btnShuffle").click();
  });

  $("btnClear").addEventListener("click", ()=>{
    $("names").value = "";
    lastTeams = null;
    $("teams").innerHTML = "";
    $("footerHint").textContent = "";
    nowPill("Ready");
    setStatus("<strong>Cleared.</strong> Paste new names to begin.");
  });

  // Load a friendly default example (optional)
  $("names").value =
`Josh
Will
Clayton
Matt
Alyssa
Brian
Kayla
Jordan`;
</script>
</body>
</html>
